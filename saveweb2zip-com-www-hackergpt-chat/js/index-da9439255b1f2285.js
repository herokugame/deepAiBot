(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{48312:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(3305)}])},3305:function(e,t,r){"use strict";let a;r.r(t),r.d(t,{__N_SSP:function(){return e6},default:function(){return e3}});var s,l,n=r(85893),i=r(67294),o=r(88767),c=r(61162),d=r(9008),u=r.n(d);let x=e=>{let{initialState:t}=e,[r,a]=(0,i.useReducer)((e,r)=>{if(!r.type)return{...e,[r.field]:r.value};if("reset"===r.type)return t;throw Error()},t);return(0,i.useMemo)(()=>({state:r,dispatch:a}),[r,a])};var m=()=>{let{t:e}=(0,c.$G)("chat");return{getModelsError:(0,i.useMemo)(()=>t=>t?{title:e("Error fetching models."),code:t.status||"unknown",messageLines:t.statusText?[t.statusText]:[e("Make sure your OpenAI API key is set in the bottom left of the sidebar."),e("If you completed this step, OpenAI may be experiencing issues.")]}:null,[e])}};let h=()=>{let e=async(e,t,r)=>{let a=(null==t?void 0:t.params)?"".concat(e).concat(t.params):e,s=(null==t?void 0:t.body)?t.body instanceof FormData?{...t,body:t.body}:{...t,body:JSON.stringify(t.body)}:t,l={...(null==t?void 0:t.headers)?t.headers:(null==t?void 0:t.body)&&t.body instanceof FormData?{}:{"Content-type":"application/json"}};return fetch(a,{...s,headers:l,signal:r}).then(e=>{if(!e.ok)throw e;let t=e.headers.get("content-type"),r=e.headers.get("content-disposition");e.headers;let a=t&&((null==t?void 0:t.indexOf("application/json"))!==-1||(null==t?void 0:t.indexOf("text/plain"))!==-1)?e.json():(null==r?void 0:r.indexOf("attachment"))!==-1?e.blob():e;return a}).catch(async e=>{let t=e.headers.get("content-type"),r=t&&(null==t?void 0:t.indexOf("application/problem+json"))!==-1?await e.json():e;throw r})};return{get:async(t,r)=>e(t,{...r,method:"get"}),post:async(t,r)=>e(t,{...r,method:"post"}),put:async(t,r)=>e(t,{...r,method:"put"}),patch:async(t,r)=>e(t,{...r,method:"patch"}),delete:async(t,r)=>e(t,{...r,method:"delete"})}};var g=()=>{h();let e=(0,i.useCallback)(()=>Promise.resolve([{id:"gpt-3.5-turbo",name:"Web Browsing (GPT-4)"},{id:"gpt-3.5-turbo-instruct",name:"HackerGPT"},{id:"gpt-4",name:"GPT-4"}]),[]);return{getModels:e}};(s=l||(l={})).HackerGPT_3_5="gpt-3.5-turbo-instruct",s.GPT_4="gpt-4",s.GPT_4_32K="gpt-3.5-turbo";let p={"gpt-3.5-turbo-instruct":{id:"gpt-3.5-turbo-instruct",name:"HackerGPT",maxLength:12e3,tokenLimit:4e3},"gpt-4":{id:"gpt-4",name:"GPT-4",maxLength:24e3,tokenLimit:8e3},"gpt-3.5-turbo":{id:"gpt-3.5-turbo",name:"Web Browsing (GPT-4)",maxLength:24e3,tokenLimit:8e3}},f=e=>{let t=e;return t.model||(t={...t,model:t.model||p[l.HackerGPT_3_5]}),t.messages||(t={...t,messages:t.messages||[]}),t},v=e=>Array.isArray(e)?e.reduce((e,t)=>{try{t.model||(t.model=p[l.HackerGPT_3_5]),t.messages||(t.messages=[]),e.push(t)}catch(e){console.warn("error while cleaning conversations' history. Removing culprit",e)}return e},[]):(console.warn("history is not an array. Returning an empty array."),[]),b=(e,t)=>{let r=t.map(t=>t.id===e.id?e:t);return w(e),y(r),{single:e,all:r}},w=e=>{localStorage.setItem("selectedConversation",JSON.stringify(e))},y=e=>{localStorage.setItem("conversationHistory",JSON.stringify(e))},k="settings",j=()=>{let e={theme:"dark"},t=localStorage.getItem(k);if(t)try{let r=JSON.parse(t);e=Object.assign(e,r)}catch(e){console.error(e)}return e},N=e=>{localStorage.setItem(k,JSON.stringify(e))};var C=r(64398),S=r(39686),P=r(86501),E=r(91259),T=r(44866);r(88522),r(46282),r(30052),a=T.Z.apps.length?T.Z.app():T.Z.initializeApp({apiKey:"AIzaSyCQ8QlvMtQvpnj_7sfEIE8-YorcFOGlHCo",authDomain:"hackergpt-6c79e.firebaseapp.com",projectId:"hackergpt-6c79e",storageBucket:"hackergpt-6c79e.appspot.com",messagingSenderId:"155863184166",appId:"1:155863184166:web:464d3eb4683ba129fe47e7",measurementId:"G-F859ZBGG23"});let z=()=>a;a.firestore(),a.auth(),a.functions();var I=T.Z,A=r(39828);let Z=async e=>{var t;let r=(0,E.v0)(e),a=null===(t=r.currentUser)||void 0===t?void 0:t.uid;if(!a)throw Error("User not logged in");let s=(0,A.ad)(e),l=(0,A.hJ)(s,"customers",a,"subscriptions"),n=(0,A.IO)(l,(0,A.ar)("status","in",["trialing","active"]));return new Promise((e,t)=>{let r=(0,A.cf)(n,t=>{0===t.docs.length?e(!1):e(!0),r()},t)})},G=(0,i.createContext)(void 0),L=e=>"api/chat";var U=e=>{let{size:t="1em",className:r=""}=e;return(0,n.jsxs)("svg",{stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-spin ".concat(r),height:t,width:t,xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("line",{x1:"12",y1:"2",x2:"12",y2:"6"}),(0,n.jsx)("line",{x1:"12",y1:"18",x2:"12",y2:"22"}),(0,n.jsx)("line",{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"}),(0,n.jsx)("line",{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"}),(0,n.jsx)("line",{x1:"2",y1:"12",x2:"6",y2:"12"}),(0,n.jsx)("line",{x1:"18",y1:"12",x2:"22",y2:"12"}),(0,n.jsx)("line",{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"}),(0,n.jsx)("line",{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"})]})},D=r(94568),_=r(21223),O=r(33111),W=r(23461),M=r(63072);let H=e=>{let{prompt:t,variables:r,onSubmit:a,onClose:s}=e,[l,o]=(0,i.useState)(r.map(e=>({key:e,value:""})).filter((e,t,r)=>r.findIndex(t=>t.key===e.key)===t)),c=(0,i.useRef)(null),d=(0,i.useRef)(null),u=(e,t)=>{o(r=>{let a=[...r];return a[e].value=t,a})},x=()=>{if(l.some(e=>""===e.value)){alert("Please fill out all variables");return}a(l.map(e=>e.value)),s()};return(0,i.useEffect)(()=>{let e=e=>{c.current&&!c.current.contains(e.target)&&s()};return window.addEventListener("click",e),()=>{window.removeEventListener("click",e)}},[s]),(0,i.useEffect)(()=>{d.current&&d.current.focus()},[]),(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey?"Escape"===e.key&&s():(e.preventDefault(),x())},children:(0,n.jsxs)("div",{ref:c,className:"dark:border-netural-400 inline-block max-h-[400px] transform overflow-y-auto rounded-lg border border-gray-300 bg-white px-4 pt-5 pb-4 text-left align-bottom shadow-xl transition-all dark:bg-hgpt-dark-gray sm:my-8 sm:max-h-[600px] sm:w-full sm:max-w-lg sm:p-6 sm:align-middle",role:"dialog",children:[(0,n.jsx)("div",{className:"mb-4 text-xl font-bold text-black dark:text-neutral-200",children:t.name}),(0,n.jsx)("div",{className:"mb-4 text-sm italic text-black dark:text-neutral-200",children:t.description}),l.map((e,t)=>(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("div",{className:"mb-2 text-sm font-bold text-neutral-200",children:e.key}),(0,n.jsx)("textarea",{ref:0===t?d:void 0,className:"mt-1 w-full rounded-lg border border-neutral-500 px-4 py-2 text-neutral-900 shadow focus:outline-none dark:border-neutral-800 dark:border-opacity-50 dark:bg-hgpt-chat-gray dark:text-neutral-100",style:{resize:"none"},placeholder:"Enter a value for ".concat(e.key,"..."),value:e.value,onChange:e=>u(t,e.target.value),rows:3})]},t)),(0,n.jsx)("button",{className:"mt-6 w-full rounded-lg border border-neutral-500 px-4 py-2 text-neutral-900 shadow hover:bg-neutral-100 focus:outline-none dark:border-neutral-800 dark:border-opacity-50 dark:bg-white dark:text-black dark:hover:bg-neutral-300",onClick:x,children:"Submit"})]})})},R=()=>{var e,t;let{t:r}=(0,c.$G)("chat"),[a,s]=(0,i.useState)(!1),l=z(),o=(0,E.v0)(l),{state:{selectedConversation:d,models:u,defaultModelId:x},handleUpdateConversation:m}=(0,i.useContext)(G),h=e=>{d&&m(d,{key:"model",value:u.find(t=>t.id===e)})};(0,i.useEffect)(()=>{let e=async()=>{let e=!!o.currentUser&&await Z(l);s(e)};e()},[null===(e=o.currentUser)||void 0===e?void 0:e.uid]);let g=e=>{if(("GPT-4"===e||"Web Browsing (GPT-4)"===e)&&!a)return;let t=u.find(t=>t.name===e);t&&(f(t.id),h(t.id))},[p,f]=(0,i.useState)((null==d?void 0:null===(t=d.model)||void 0===t?void 0:t.id)||x);return(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsx)("div",{className:"mb-1 w-full rounded border border-neutral-200 bg-transparent pr-2 text-neutral-900 dark:border-neutral-600 dark:text-white",children:(0,n.jsx)("select",{className:"w-full cursor-pointer bg-transparent p-2",value:p,onChange:e=>{var t;let r=null===(t=u.find(t=>t.id===e.target.value))||void 0===t?void 0:t.name;r&&g(r),f(e.target.value),h(e.target.value)},children:u.sort((e,t)=>"Web Browsing (GPT-4"===e.name?1:"Web Browsing (GPT-4"===t.name||"HackerGPT"===e.name?-1:"HackerGPT"===t.name?1:"GPT-4"===e.name?-1:"GPT-4"===t.name?1:e.name.localeCompare(t.name)).map(e=>(0,n.jsx)("option",{value:e.id,disabled:("GPT-4"===e.name||"Web Browsing (GPT-4)"===e.name)&&!a,className:"dark:bg-hgpt-medium-gray dark:text-white ".concat(p===e.id?"rounded-lg bg-white text-gray-900 dark:bg-hgpt-medium-gray dark:text-gray-100":"text-gray-500"),children:e.name},e.id))})})})},B=e=>{var t;let{onSend:r,onRegenerate:a,onScrollDownClick:s,stopConversationRef:l,textareaRef:o,showScrollDownButton:d}=e,{t:u}=(0,c.$G)("chat"),{state:{selectedConversation:x,messageIsStreaming:m,prompts:h},dispatch:g}=(0,i.useContext)(G),[p,f]=(0,i.useState)(),[v,b]=(0,i.useState)(!1),[w,y]=(0,i.useState)(!1),[k,j]=(0,i.useState)(0),[N,C]=(0,i.useState)(""),[S,P]=(0,i.useState)([]),[E,T]=(0,i.useState)(!1),[z,I]=(0,i.useState)(!1),[A,Z]=(0,i.useState)(null),L=(0,i.useRef)(null),U=h.filter(e=>e.name.toLowerCase().includes(N.toLowerCase())),B=()=>{if(!m){if(!p){alert(u("Please enter a message"));return}r({role:"user",content:p},A),f(""),Z(null),window.innerWidth<640&&o&&o.current&&o.current.blur()}},K=()=>{let e=void 0===window.navigator?"":navigator.userAgent;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile|mobile|CriOS/i.test(e)},F=()=>{let e=U[k];e&&(f(t=>{let r=null==t?void 0:t.replace(/\/\w*$/,e.content);return r}),Y(e)),y(!1)},J=e=>{let t;let r=/{{(.*?)}}/g,a=[];for(;null!==(t=r.exec(e));)a.push(t[1]);return a},$=(0,i.useCallback)(e=>{let t=e.match(/\/\w*$/);t?(y(!0),C(t[0].slice(1))):(y(!1),C(""))},[]),Y=e=>{let t=J(e.content);P(t),t.length>0?T(!0):(f(t=>{let r=null==t?void 0:t.replace(/\/\w*$/,e.content);return r}),$(e.content))};return(0,i.useEffect)(()=>{L.current&&(L.current.scrollTop=30*k)},[k]),(0,i.useEffect)(()=>{if(o&&o.current){var e,t;o.current.style.height="inherit",o.current.style.height="".concat(null===(e=o.current)||void 0===e?void 0:e.scrollHeight,"px"),o.current.style.overflow="".concat((null==o?void 0:null===(t=o.current)||void 0===t?void 0:t.scrollHeight)>400?"auto":"hidden")}},[p]),(0,i.useEffect)(()=>{let e=e=>{L.current&&!L.current.contains(e.target)&&y(!1)};return window.addEventListener("click",e),()=>{window.removeEventListener("click",e)}},[]),(0,n.jsx)("div",{className:"absolute bottom-0 left-0 w-full border-transparent bg-gradient-to-b from-transparent via-white to-white pt-6 dark:border-white/20 dark:via-hgpt-medium-gray dark:to-hgpt-medium-gray md:pt-2",children:(0,n.jsxs)("div",{className:"stretch mx-2 mt-4 flex flex-row gap-3 pb-2 last:mb-2 md:mx-4 md:mt-[52px] md:last:mb-6 lg:mx-auto lg:max-w-3xl",children:[m&&(0,n.jsxs)("button",{className:"absolute top-0 left-0 right-0 mx-auto mb-3 flex w-fit items-center gap-3 rounded border border-neutral-200 bg-white py-2 px-4 text-black hover:opacity-50 dark:border-neutral-600 dark:bg-hgpt-medium-gray dark:text-white md:mb-0 md:mt-2",onClick:()=>{l.current=!0,setTimeout(()=>{l.current=!1},1e3)},children:[(0,n.jsx)(D.Z,{size:16})," ",u("Stop Generating")]}),!m&&x&&x.messages.length>0&&(0,n.jsxs)("button",{className:"absolute top-0 left-0 right-0 mx-auto mb-3 flex w-fit items-center gap-3 rounded border border-neutral-200 bg-white py-2 px-4 text-black hover:opacity-50 dark:border-neutral-600 dark:bg-hgpt-medium-gray dark:text-white md:mb-0 md:mt-2",onClick:a,children:[(0,n.jsx)(_.Z,{size:16})," ",u("Regenerate response")]}),(0,n.jsxs)("div",{className:"relative mx-2 flex w-full flex-grow flex-col rounded-md border border-black/10 bg-white shadow-[0_0_10px_rgba(0,0,0,0.10)] dark:border-gray-900/50 dark:bg-hgpt-chat-gray dark:text-white dark:shadow-[0_0_15px_rgba(0,0,0,0.10)] sm:mx-4",children:[(0,n.jsx)("button",{className:"absolute left-2 top-2 rounded-sm p-1 text-neutral-800 opacity-60 hover:bg-neutral-200 hover:text-neutral-900 dark:bg-opacity-50 dark:text-neutral-100 dark:hover:text-neutral-200",onClick:()=>I(!z),onKeyDown:e=>{},children:(0,n.jsx)(O.Z,{size:20})}),z&&(0,n.jsx)("div",{className:"absolute left-0 bottom-14 rounded bg-white dark:bg-hgpt-medium-gray",children:(0,n.jsx)(R,{})}),(0,n.jsx)("div",{className:"flex items-start",children:(0,n.jsx)("textarea",{ref:o,className:"m-0 w-full resize-none border-0 bg-transparent p-0 py-2 pr-8 pl-10 text-black dark:bg-transparent dark:text-white md:py-3 md:pl-10",style:{resize:"none",bottom:"".concat(null==o?void 0:null===(t=o.current)||void 0===t?void 0:t.scrollHeight,"px"),maxHeight:"400px",overflow:"".concat(o.current&&o.current.scrollHeight>400?"auto":"hidden")},placeholder:u("Type a message ...")||"",value:p,rows:1,onCompositionStart:()=>b(!0),onCompositionEnd:()=>b(!1),onChange:e=>{let t=e.target.value,r=null==x?void 0:x.model.maxLength;if(r&&t.length>r){alert(u("Message limit is {{maxLength}} characters. You have entered {{valueLength}} characters.",{maxLength:r,valueLength:t.length}));return}f(t),$(t)},onKeyDown:e=>{w?"ArrowDown"===e.key?(e.preventDefault(),j(e=>e<h.length-1?e+1:e)):"ArrowUp"===e.key?(e.preventDefault(),j(e=>e>0?e-1:e)):"Tab"===e.key?(e.preventDefault(),j(e=>e<h.length-1?e+1:0)):"Enter"===e.key?(e.preventDefault(),F()):"Escape"===e.key?(e.preventDefault(),y(!1)):j(0):"Enter"!==e.key||v||K()||e.shiftKey||(e.preventDefault(),B())}})}),(0,n.jsx)("button",{className:"absolute right-2 top-2 rounded-sm p-1 text-neutral-800 opacity-60 hover:bg-neutral-200 hover:text-neutral-900 dark:bg-opacity-50 dark:text-neutral-100 dark:hover:text-neutral-200",onClick:B,children:m?(0,n.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-t-2 text-zinc-500 dark:text-zinc-400"}):(0,n.jsx)(W.Z,{size:18})}),d&&(0,n.jsx)("div",{className:"absolute bottom-12 right-0 lg:bottom-0 lg:-right-10",children:(0,n.jsx)("button",{className:"flex h-7 w-7 items-center justify-center rounded-full bg-neutral-300 text-gray-800 shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-neutral-200",onClick:s,children:(0,n.jsx)(M.Z,{size:18})})}),E&&(0,n.jsx)(H,{prompt:U[k],variables:S,onSubmit:e=>{let t=null==p?void 0:p.replace(/{{(.*?)}}/g,(t,r)=>{let a=S.indexOf(r);return e[a]});f(t),o&&o.current&&o.current.focus()},onClose:()=>T(!1)})]})]})})};var K=r(90553);let F=()=>(0,n.jsx)("div",{className:"group border-b border-black/10 bg-gray-50 text-gray-800 dark:border-gray-900/50 dark:bg-hgpt-light-gray dark:text-gray-100",style:{overflowWrap:"anywhere"},children:(0,n.jsxs)("div",{className:"m-auto flex gap-4 p-4 text-base md:max-w-2xl md:gap-6 md:py-6 lg:max-w-2xl lg:px-0 xl:max-w-3xl",children:[(0,n.jsx)("div",{className:"min-w-[40px] items-end",children:(0,n.jsx)(K.Z,{size:30})}),(0,n.jsx)("span",{className:"mt-1 animate-pulse cursor-default",children:"▍"})]})});var J=r(93352);let $=async e=>{var t;let r="price_1NzIJ4FAn4ulhcn1aasPuXCr";if(!r)throw Error("Missing Stripe price ID environment variable");let a=(0,E.v0)(e),s=null===(t=a.currentUser)||void 0===t?void 0:t.uid;if(!s)throw Error("User is not authenticated");let l=(0,A.ad)(e),n=(0,A.hJ)(l,"customers",s,"checkout_sessions"),i=!1,o=await (0,A.ET)(n,{price:r,billing_address_collection:"auto",allow_promotion_codes:!0,success_url:window.location.origin,cancel_url:window.location.origin});return new Promise((e,t)=>{let r=(0,A.cf)(o,a=>{let s=a.data();if(s.error)return r(),t(Error("An error occurred: ".concat(s.error.message)));s.url&&!i&&(r(),e(s.url),i=!0)})})},Y=async e=>{var t,r;let a=(0,E.v0)(e),s=null===(t=a.currentUser)||void 0===t?void 0:t.uid;if(!s)throw Error("User is not authenticated");let l={};try{let t=(0,J.$C)(e,"us-central1"),a=(0,J.V1)(t,"ext-firestore-stripe-payments-createPortalLink"),n=await a({customerId:s,returnUrl:window.location.origin});if(!(l=null!==(r=n.data)&&void 0!==r?r:{}).url)throw Error("No url returned");return l.url}catch(e){if(e instanceof Error)throw console.error(e.message),Error(e.message);throw console.error("An unknown error occurred"),Error("An unknown error occurred")}};var X=r(73935),q=r(11163);let Q=async e=>{let t=await fetch("https://us-central1-hackergpt-6c79e.cloudfunctions.net/GetCryptoPaymentStatus",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}),r=await t.json(),a="";return r.status?("trialing"===r.status?a="You are currently on a free trial.":"active"===r.status?a="Your subscription is active.":"confirmation-pending"===r.status?a="Waiting for blockchain confirmation.":"payment-failed"===r.status?a="Blockchain confirmation failed. Please try again or contact support.":"expired"===r.status&&(a="Your subscription has expired."),r.ends_at&&("expired"===r.status?a+=" It expired on ".concat(r.ends_at.split("T")[0]):a+=" Your subscription will end on ".concat(r.ends_at.split("T")[0])),a):r};var V=r(97283),ee=r(25386),et=r(37872),er=r(25504),ea=e=>{let{isOpen:t,onClose:r,checkoutUrl:a}=e,s=(0,i.useRef)(null),l=(0,q.useRouter)(),[o,c]=(0,i.useState)(null),[d,u]=(0,i.useState)(null),[x,m]=(0,i.useState)(null),[h,g]=(0,i.useState)(null),p=z(),f=(0,E.v0)(p),v=f.currentUser,b=async()=>{if(v)try{c(await v.getIdToken(!0))}catch(e){return}},w=async()=>{if(o){let e=await Q(o);console.log(e),m(e)}};(0,i.useEffect)(()=>{b(),w(),y()},[t]);let y=async()=>{if(!o)return;let e="https://us-central1-hackergpt-6c79e.cloudfunctions.net/CreateCharge";if(!e)throw Error("Missing Coinbase Charge Url environment variable");let t=await fetch(e,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}}),r=await t.json(),{hosted_url:a}=r;g(a)};return(0,n.jsx)(n.Fragment,{children:t?(0,X.createPortal)((0,n.jsx)("div",{className:"inset-negative-5 fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,n.jsx)("div",{className:"fixed inset-0 z-10 overflow-hidden",children:(0,n.jsxs)("div",{className:"flex min-h-screen items-center justify-center px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,n.jsx)("div",{className:"hidden sm:inline-block sm:h-screen sm:align-middle","aria-hidden":"true"}),(0,n.jsxs)("div",{ref:s,className:"inline-block transform overflow-y-auto rounded-lg border border-gray-300 bg-hgpt-dark-gray px-4 pt-5 pb-4 text-left align-bottom shadow-xl sm:my-8 sm:w-full sm:max-w-3xl sm:p-6 sm:align-middle",role:"dialog",children:[(0,n.jsx)("div",{className:"absolute top-2 right-2 flex h-10 w-10 cursor-pointer items-center justify-center rounded-full",onClick:r,children:(0,n.jsx)(V.Z,{color:"gray",size:22,strokeWidth:2})}),(0,n.jsx)("div",{className:"flex items-center justify-between text-white",children:(0,n.jsxs)("div",{className:"text-md pb-4 font-bold",children:["Your Plan ",x&&": "+x]})}),(0,n.jsxs)("div",{className:"flex flex-col text-white sm:flex-row",children:[(0,n.jsxs)("div",{className:"mb-4 flex-1 rounded-lg bg-hgpt-dark-gray sm:mb-0",children:[(0,n.jsx)("h3",{className:"mb-2 text-lg font-bold",children:"Free plan"}),(0,n.jsx)("button",{className:"mb-4 w-full rounded bg-[#8e8ea0] px-4 py-2 text-hgpt-dark-gray",disabled:!0,children:"Your current plan"}),(0,n.jsxs)("div",{className:"mb-2 flex items-center",children:[(0,n.jsx)("div",{className:"icon-container mr-2",children:(0,n.jsx)(ee.Z,{color:"#8e8ea0",size:22,strokeWidth:2})}),(0,n.jsx)("div",{className:"text-container flex-1",children:(0,n.jsx)("p",{className:"overflow-hidden truncate whitespace-nowrap",children:"Access to our HackerGPT model"})})]}),(0,n.jsxs)("div",{className:"mb-2 flex items-center",children:[(0,n.jsx)("div",{className:"icon-container mr-2",children:(0,n.jsx)(ee.Z,{color:"#8e8ea0",size:22,strokeWidth:2})}),(0,n.jsx)("div",{className:"text-container",children:(0,n.jsx)("p",{children:"Regular model updates"})})]}),(0,n.jsxs)("div",{className:"mb-2 flex items-center",children:[(0,n.jsx)("div",{className:"icon-container mr-2",children:(0,n.jsx)(ee.Z,{color:"#8e8ea0",size:22,strokeWidth:2})}),(0,n.jsx)("div",{className:"text-container",children:(0,n.jsx)("p",{children:"Standard response speed"})})]})]}),(0,n.jsx)("div",{className:"my-2 mx-4 hidden w-px bg-gray-300 sm:block"}),(0,n.jsxs)("div",{className:"mb-4 flex-1 rounded-lg bg-hgpt-dark-gray sm:mb-0",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h3",{className:"mb-2 text-lg font-bold",children:"HackerGPT Plus"}),(0,n.jsx)("div",{className:"mb-2 text-lg text-[#8e8ea0]",children:"USD $29/mo"})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-0 md:flex-row md:gap-2",children:[(0,n.jsxs)("button",{onClick:()=>{a&&l.push(a)},className:"mb-4 flex w-full flex-row items-center justify-center gap-y-3 rounded bg-green-600 px-4 py-2 text-sm font-bold text-white transition duration-200 hover:bg-green-700",children:[(0,n.jsx)(et.Z,{color:"white",size:22,strokeWidth:2}),"Upgrade to Plus"]}),(0,n.jsxs)("button",{onClick:()=>{h&&h.startsWith("https://commerce.coinbase.com/pay")?window.open(h,"_blank"):u("Error creating payment link")},className:"mb-4 flex w-full flex-row items-center justify-center gap-y-3 rounded bg-orange-600 px-4 py-2 text-sm font-bold text-white transition duration-200 hover:bg-orange-700",children:[(0,n.jsx)(er.Z,{color:"white",size:22,strokeWidth:2}),"Pay with Crypto"]})]}),d&&(0,n.jsx)("div",{className:"mb-2 text-red-500",children:d}),(0,n.jsx)("div",{className:"mb-5 flex items-center",children:(0,n.jsx)("div",{className:"text-container text-sm",children:(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-bold",children:"Note for crypto payment:"})," ","It can take several minutes for the payment to complete. Once it went through refresh the page."]})})}),(0,n.jsxs)("div",{className:"mb-2 flex items-center",children:[(0,n.jsx)("div",{className:"icon-container mr-2",children:(0,n.jsx)(ee.Z,{color:"#43A047",size:22,strokeWidth:2})}),(0,n.jsx)("div",{className:"text-container flex-1",children:(0,n.jsx)("p",{className:"overflow-hidden truncate whitespace-nowrap",children:"Unlimited access to our HackerGPT model"})})]}),(0,n.jsxs)("div",{className:"mb-2 flex items-center",children:[(0,n.jsx)("div",{className:"icon-container mr-2",children:(0,n.jsx)(ee.Z,{color:"#43A047",size:22,strokeWidth:2})}),(0,n.jsx)("div",{className:"text-container",children:(0,n.jsx)("p",{children:"Access to GPT-4 Turbo model"})})]}),(0,n.jsxs)("div",{className:"mb-2 flex items-center",children:[(0,n.jsx)("div",{className:"icon-container mr-2",children:(0,n.jsx)(ee.Z,{color:"#43A047",size:22,strokeWidth:2})}),(0,n.jsx)("div",{className:"text-container flex-1",children:(0,n.jsx)("p",{className:"overflow-hidden truncate whitespace-nowrap",children:"Access to our HackerGPT API"})})]}),(0,n.jsxs)("div",{className:"mb-2 flex items-center",children:[(0,n.jsx)("div",{className:"icon-container mr-2",children:(0,n.jsx)(ee.Z,{color:"#43A047",size:22,strokeWidth:2})}),(0,n.jsx)("div",{className:"text-container",children:(0,n.jsx)("p",{children:"Access to Web Browsing plugin"})})]}),(0,n.jsxs)("div",{className:"mb-2 flex items-center",children:[(0,n.jsx)("div",{className:"icon-container mr-2",children:(0,n.jsx)(ee.Z,{color:"#43A047",size:22,strokeWidth:2})}),(0,n.jsx)("div",{className:"text-container",children:(0,n.jsx)("p",{children:"Faster response speed"})})]})]})]})]})]})})}),document.getElementById("__next")):null})},es=r(39332);function el(e){var t,r;let[a,s]=(0,i.useState)(null),[l,o]=(0,i.useState)(!1),[c,d]=(0,i.useState)(null),[u,x]=(0,i.useState)(!1),m=z(),h=(0,E.v0)(m);(0,es.useRouter)(),(0,i.useEffect)(()=>{let e=async()=>{if(h.currentUser)try{let e=await $(m);d(e)}catch(e){console.error("Error fetching Stripe checkout URL:",e)}};e()},[null===(t=h.currentUser)||void 0===t?void 0:t.uid]),(0,i.useEffect)(()=>{let e=(0,E.Aj)(h,e=>{s(e)});return()=>{e()}},[]),(0,i.useEffect)(()=>{let e=async()=>{var e;if(null===(e=h.currentUser)||void 0===e?void 0:e.uid)try{let e=await $(m);d(e);let t=await Z(m);o(t)}catch(e){console.error(e)}};e()},[null===(r=h.currentUser)||void 0===r?void 0:r.uid]);let g={title:"",description:""};switch(e.moduleName){case"HackerGPT":g={title:"AI + Hacker Wisdom: Unbeatable Combo",feature:"Constantly updated with fresh hacker knowledge",description:"Available to Free and Plus users",extra:"Unlimited to Plus users",beta:!0};break;case"GPT-4":g={title:"Hacker's Dream AI",feature:"Ready for complex challenges",description:"Available exclusively to Plus users",extra:"Includes Exclusive Web Browsing plugin",buttonText:"Upgrade to Plus"};break;default:g={title:"Unknown Module",description:"This module is not recognized."}}return(0,n.jsxs)("div",{className:"group/options shadow-xxs dark:shadow-xs mx-2 flex flex-col overflow-hidden rounded-xl border border-gray-100 bg-white text-left dark:border-gray-800 dark:bg-hgpt-dark-gray dark:text-gray-100 sm:mx-1",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-2.5 whitespace-pre-line px-5 py-4 text-sm sm:text-base",children:[(0,n.jsx)("span",{className:"block text-gray-900 dark:text-white",children:g.title}),g.feature&&(0,n.jsx)("span",{className:"block text-xs text-gray-500",children:g.feature}),(0,n.jsx)("span",{className:"block text-xs text-gray-500",children:g.description}),g.extra&&(0,n.jsx)("span",{className:"block text-xs text-gray-500",children:g.extra})]}),g.buttonText&&!l&&a||g.beta?(0,n.jsxs)("div",{role:"group",className:"mb-1 max-h-[calc(100vh-300px)] overflow-auto border-t border-gray-200 text-sm dark:border-hgpt-medium-gray",children:[g.buttonText&&(0,n.jsx)("div",{className:"px-5 py-3",children:(0,n.jsx)("button",{className:"rounded bg-green-600 px-4 py-2 font-bold text-white transition duration-200 hover:bg-green-700",onClick:()=>{x(!0)},children:g.buttonText})}),g.beta&&(0,n.jsx)("div",{className:"px-5 py-3",children:(0,n.jsx)("span",{className:"py-0.25 rounded bg-blue-200 px-1 text-sm font-bold capitalize text-blue-500",children:"beta"})})]}):null,(0,n.jsx)("div",{className:"z-50",children:(0,n.jsx)(ea,{isOpen:u,onClose:()=>{x(!1)},checkoutUrl:c})})]})}let en=()=>{var e,t;let{t:r}=(0,c.$G)("chat"),[a,s]=(0,i.useState)(null),[l,o]=(0,i.useState)(!1),[d,u]=(0,i.useState)(!1),[x,m]=(0,i.useState)(null),h=(0,i.useRef)(null),g=z(),p=(0,E.v0)(g);(0,i.useEffect)(()=>{let e=(0,E.v0)(),t=(0,E.Aj)(e,e=>{s(e)}),r=async()=>{let t=!!e.currentUser&&await Z(g);o(t)};return r(),()=>{t(),h.current&&clearTimeout(h.current)}},[g,null===(e=p.currentUser)||void 0===e?void 0:e.uid]);let f=e=>{if(("GPT-4"===e||"Web Browsing (GPT-4)"===e)&&!l)return;let t=b.find(t=>t.name===e);t&&(I(t.id),N(t.id))},{state:{selectedConversation:v,models:b,defaultModelId:w},handleUpdateConversation:y,dispatch:k}=(0,i.useContext)(G),j=e=>{let t=b.find(t=>t.id===e.target.value);v&&y(v,{key:"model",value:t||null})},N=e=>{j({target:{value:e}})},S=e=>{null!==h.current&&clearTimeout(h.current),m(e),u(!0)},P=()=>{h.current=window.setTimeout(()=>{u(!1),m(null)},300)},[T,I]=(0,i.useState)((null==v?void 0:null===(t=v.model)||void 0===t?void 0:t.id)||w);return(0,n.jsxs)("div",{className:"relative flex flex-col items-stretch justify-center gap-2 sm:items-center",children:[(0,n.jsx)("div",{className:"relative flex rounded-xl bg-gray-100 p-1 text-hgpt-medium-gray dark:bg-hgpt-dark-gray",children:(0,n.jsx)("ul",{className:"flex w-full list-none gap-1 sm:w-auto",children:b.filter(e=>"Web Browsing (GPT-4)"!==e.name).sort((e,t)=>"HackerGPT"===e.name?-1:"HackerGPT"===t.name?1:"GPT-4"===e.name?-1:"GPT-4"===t.name?1:e.name.localeCompare(t.name)).map((e,t)=>(0,n.jsx)("li",{className:"group/toggle w-full",children:(0,n.jsx)("button",{type:"button","aria-haspopup":"menu","aria-expanded":"false","data-state":"closed",className:"w-full cursor-pointer ".concat(T===e.id?"rounded-lg border-black/10 bg-white text-gray-900 dark:bg-hgpt-medium-gray dark:text-gray-100":"border-transparent text-gray-500 hover:text-gray-800 hover:dark:text-gray-100"),onClick:()=>f(e.name),onMouseEnter:()=>S(e.name),onMouseLeave:P,children:(0,n.jsxs)("div",{className:"group/button relative flex w-full items-center justify-center gap-1 rounded-lg py-3 outline-none transition-opacity duration-100 sm:w-auto sm:min-w-[150px] md:gap-2 md:py-3",children:["HackerGPT"===e.name?(0,n.jsx)("div",{className:"pl-2",children:(0,n.jsx)(C.Z,{size:20})}):(0,n.jsx)("div",{className:"pl-2",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"none",className:"icon-sm group-hover/button:text-brand-purple transition-colors",width:"16",height:"16",children:(0,n.jsx)("path",{d:"M12.784 1.442a.8.8 0 0 0-1.569 0l-.191.953a.8.8 0 0 1-.628.628l-.953.19a.8.8 0 0 0 0 1.57l.953.19a.8.8 0 0 1 .628.629l.19.953a.8.8 0 0 0 1.57 0l.19-.953a.8.8 0 0 1 .629-.628l.953-.19a.8.8 0 0 0 0-1.57l-.953-.19a.8.8 0 0 1-.628-.629l-.19-.953h-.002ZM5.559 4.546a.8.8 0 0 0-1.519 0l-.546 1.64a.8.8 0 0 1-.507.507l-1.64.546a.8.8 0 0 0 0 1.519l1.64.547a.8.8 0 0 1 .507.505l.546 1.641a.8.8 0 0 0 1.519 0l.546-1.64a.8.8 0 0 1 .506-.507l1.641-.546a.8.8 0 0 0 0-1.519l-1.64-.546a.8.8 0 0 1-.507-.506L5.56 4.546Zm5.6 6.4a.8.8 0 0 0-1.519 0l-.147.44a.8.8 0 0 1-.505.507l-.441.146a.8.8 0 0 0 0 1.519l.44.146a.8.8 0 0 1 .507.506l.146.441a.8.8 0 0 0 1.519 0l.147-.44a.8.8 0 0 1 .506-.507l.44-.146a.8.8 0 0 0 0-1.519l-.44-.147a.8.8 0 0 1-.507-.505l-.146-.441Z",fill:"currentColor"})})}),(0,n.jsx)("span",{className:"truncate pr-1.5 text-sm font-medium md:pr-1.5",children:e.id===w?"".concat(e.name):e.name}),1===t&&!l&&(0,n.jsx)("div",{className:"pr-2",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",className:"icon-sm group-hover/button:text-brand-purple ml-0.5 -ml-2 !text-gray-500 transition-colors group-hover/options:text-gray-500 sm:ml-0",width:"16",height:"16",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M12 1.5a5.25 5.25 0 00-5.25 5.25v3a3 3 0 00-3 3v6.75a3 3 0 003 3h10.5a3 3 0 003-3v-6.75a3 3 0 00-3-3v-3c0-2.9-2.35-5.25-5.25-5.25zm3.75 8.25v-3a3.75 3.75 0 10-7.5 0v3h7.5z",clipRule:"evenodd"})})})]})})},e.id))})}),d&&(0,n.jsx)("div",{onMouseEnter:()=>{null!==h.current&&clearTimeout(h.current)},onMouseLeave:()=>{h.current=window.setTimeout(()=>{u(!1),m(null)},300)},children:(0,n.jsx)(el,{moduleName:x})})]})};var ei=r(8861),eo=r(21942),ec=r(74075),ed=r(88198),eu=r(93625),ex=r(67828),em=r(80335),eh=r(93179),eg=r(84283);let ep={javascript:".js",python:".py",java:".java",c:".c",cpp:".cpp","c++":".cpp","c#":".cs",ruby:".rb",php:".php",swift:".swift","objective-c":".m",kotlin:".kt",typescript:".ts",go:".go",perl:".pl",rust:".rs",scala:".scala",haskell:".hs",lua:".lua",shell:".sh",sql:".sql",html:".html",css:".css"},ef=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r="ABCDEFGHJKLMNPQRSTUVWXY3456789",a="";for(let t=0;t<e;t++)a+=r.charAt(Math.floor(Math.random()*r.length));return t?a.toLowerCase():a},ev=(0,i.memo)(e=>{let{language:t,value:r}=e,{t:a}=(0,c.$G)("markdown"),[s,l]=(0,i.useState)(!1);return(0,n.jsxs)("div",{className:"codeblock relative font-sans text-[16px]",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between py-1.5 px-4",children:[(0,n.jsx)("span",{className:"text-xs lowercase text-white",children:t}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsxs)("button",{className:"flex items-center gap-1.5 rounded bg-none p-1 text-xs text-white",onClick:()=>{navigator.clipboard&&navigator.clipboard.writeText&&navigator.clipboard.writeText(r).then(()=>{l(!0),setTimeout(()=>{l(!1)},2e3)})},children:[s?(0,n.jsx)(ed.Z,{size:18}):(0,n.jsx)(ex.Z,{size:18}),s?a("Copied!"):a("Copy code")]}),(0,n.jsx)("button",{className:"flex items-center rounded bg-none p-1 text-xs text-white",onClick:()=>{let e=ep[t]||".file",s="file-".concat(ef(3,!0)).concat(e),l=window.prompt(a("Enter file name")||"",s);if(!l)return;let n=new Blob([r],{type:"text/plain"}),i=URL.createObjectURL(n),o=document.createElement("a");o.download=l,o.href=i,o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i)},children:(0,n.jsx)(em.Z,{size:18})})]})]}),(0,n.jsx)(eh.Z,{language:t,style:eg.vk,customStyle:{margin:0},children:r})]})});ev.displayName="CodeBlock";var eb=r(16202);let ew=(0,i.memo)(eb.D,(e,t)=>e.children===t.children);var ey=r(45884),ek=r(14769),ej=r(30399);let eN=(0,i.memo)(e=>{var t;let{message:r,messageIndex:a,onEdit:s}=e,{t:l}=(0,c.$G)("chat"),{state:{selectedConversation:o,conversations:d,currentMessage:u,messageIsStreaming:x},dispatch:m}=(0,i.useContext)(G),[h,g]=(0,i.useState)(!1),[p,f]=(0,i.useState)(!1),[v,w]=(0,i.useState)(r.content),[y,k]=(0,i.useState)(!1),j=(0,i.useRef)(null),N=()=>{r.content!=v&&o&&s&&s({...r,content:v}),g(!1)};return(0,i.useEffect)(()=>{w(r.content)},[r.content]),(0,i.useEffect)(()=>{j.current&&(j.current.style.height="inherit",j.current.style.height="".concat(j.current.scrollHeight,"px"))},[h]),(0,n.jsx)("div",{className:"group md:px-4 ".concat("assistant"===r.role?"border-b border-black/10 bg-gray-50 text-gray-800 dark:border-gray-900/50 dark:bg-hgpt-light-gray dark:text-gray-100":"border-b border-black/10 bg-white text-gray-800 dark:border-gray-900/50 dark:bg-hgpt-medium-gray dark:text-gray-100"),style:{overflowWrap:"anywhere"},children:(0,n.jsxs)("div",{className:"relative m-auto flex p-4 text-base md:max-w-2xl md:gap-6 md:py-6 lg:max-w-2xl lg:px-0 xl:max-w-3xl",children:[(0,n.jsx)("div",{className:"min-w-[40px] text-right font-bold",children:"assistant"===r.role?(0,n.jsx)(K.Z,{size:30}):(0,n.jsx)(ei.Z,{size:30})}),(0,n.jsx)("div",{className:"prose mt-[-2px] w-full dark:prose-invert",children:"user"===r.role?(0,n.jsxs)("div",{className:"flex w-full",children:[h?(0,n.jsxs)("div",{className:"flex w-full flex-col",children:[(0,n.jsx)("textarea",{ref:j,className:"w-full resize-none whitespace-pre-wrap border-none dark:bg-hgpt-medium-gray",value:v,onChange:e=>{w(e.target.value),j.current&&(j.current.style.height="inherit",j.current.style.height="".concat(j.current.scrollHeight,"px"))},onKeyDown:e=>{"Enter"!==e.key||p||e.shiftKey||(e.preventDefault(),N())},onCompositionStart:()=>f(!0),onCompositionEnd:()=>f(!1),style:{fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit",padding:"0",margin:"0",overflow:"hidden"}}),(0,n.jsxs)("div",{className:"mt-10 flex justify-center space-x-4",children:[(0,n.jsx)("button",{className:"h-[40px] rounded-md bg-blue-500 px-4 py-1 text-sm font-medium text-white enabled:hover:bg-blue-600 disabled:opacity-50",onClick:N,disabled:v.trim().length<=0,children:l("Save & Submit")}),(0,n.jsx)("button",{className:"h-[40px] rounded-md border border-neutral-300 px-4 py-1 text-sm font-medium text-neutral-700 hover:bg-neutral-100 dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-800",onClick:()=>{w(r.content),g(!1)},children:l("Cancel")})]})]}):(0,n.jsx)("div",{className:"prose flex-1 whitespace-pre-wrap dark:prose-invert",children:r.content}),!h&&(0,n.jsxs)("div",{className:"ml-1 flex flex-col items-center justify-end gap-4 md:-mr-8 md:ml-0 md:flex-row md:items-start md:justify-start md:gap-1",children:[(0,n.jsx)("button",{className:"invisible text-gray-500 hover:text-gray-700 focus:visible group-hover:visible dark:text-gray-400 dark:hover:text-gray-300",onClick:()=>{g(!h)},children:(0,n.jsx)(eo.Z,{size:20})}),(0,n.jsx)("button",{className:"invisible text-gray-500 hover:text-gray-700 focus:visible group-hover:visible dark:text-gray-400 dark:hover:text-gray-300",onClick:()=>{if(!o)return;let{messages:e}=o,t=e.findIndex(e=>e===r);if(t<0)return;t<e.length-1&&"assistant"===e[t+1].role?e.splice(t,2):e.splice(t,1);let a={...o,messages:e},{single:s,all:l}=b(a,d);m({field:"selectedConversation",value:s}),m({field:"conversations",value:l})},children:(0,n.jsx)(ec.Z,{size:20})})]})]}):(0,n.jsxs)("div",{className:"flex flex-row",children:[(0,n.jsx)(ew,{className:"prose flex-1 dark:prose-invert",remarkPlugins:[ek.Z,ej.Z],rehypePlugins:[ey.Z],components:{code(e){let{node:t,inline:r,className:a,children:s,...l}=e;if(s.length){if("▍"==s[0])return(0,n.jsx)("span",{className:"mt-1 animate-pulse cursor-default",children:"▍"});s[0]=s[0].replace("`▍`","▍")}let i=/language-(\w+)/.exec(a||"");return r?(0,n.jsx)("code",{className:a,...l,children:s}):(0,n.jsx)(ev,{language:i&&i[1]||"",value:String(s).replace(/\n$/,""),...l},Math.random())},table(e){let{children:t}=e;return(0,n.jsx)("table",{className:"border-collapse border border-black px-3 py-1 dark:border-white",children:t})},th(e){let{children:t}=e;return(0,n.jsx)("th",{className:"break-words border border-black bg-gray-500 px-3 py-1 text-white dark:border-white",children:t})},td(e){let{children:t}=e;return(0,n.jsx)("td",{className:"break-words border border-black px-3 py-1 dark:border-white",children:t})}},children:"".concat(r.content).concat(x&&a==(null!==(t=null==o?void 0:o.messages.length)&&void 0!==t?t:0)-1?"`▍`":"")}),(0,n.jsx)("div",{className:"ml-1 flex flex-col items-center justify-end gap-4 md:-mr-8 md:ml-0 md:flex-row md:items-start md:justify-start md:gap-1",children:y?(0,n.jsx)(ed.Z,{size:20,className:"text-green-500 dark:text-green-400"}):(0,n.jsx)("button",{className:"invisible text-gray-500 hover:text-gray-700 focus:visible group-hover:visible dark:text-gray-400 dark:hover:text-gray-300",onClick:()=>{navigator.clipboard&&navigator.clipboard.writeText(r.content).then(()=>{k(!0),setTimeout(()=>{k(!1)},2e3)})},children:(0,n.jsx)(eu.Z,{size:20})})})]})})]})})});eN.displayName="ChatMessage";let eC=(0,i.memo)(eN,(e,t)=>e.message.content===t.message.content),eS=(0,i.memo)(e=>{var t,r;let a,s;let{stopConversationRef:l}=e,{t:o}=(0,c.$G)("chat"),{state:{selectedConversation:d,conversations:u,models:x,apiKey:m,pluginKeys:h,serverSideApiKeyIsSet:g,messageIsStreaming:p,modelError:f,loading:v},handleUpdateConversation:k,dispatch:j}=(0,i.useContext)(G),[N,T]=(0,i.useState)(),[I,A]=(0,i.useState)(!0),[D,_]=(0,i.useState)(!1),[O,W]=(0,i.useState)(!1),M=(0,i.useRef)(null),H=(0,i.useRef)(null),R=(0,i.useRef)(null),K=(0,i.useCallback)(async function(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=X.currentUser,n=[];if(s)try{t=await s.getIdToken(!0)}catch(e){P.ZP.error("Unable to generate Auth token");return}else if(n.push(e),n.push({role:"assistant",content:"\n        \n\uD83D\uDED1 **Whoa, hold on a sec!** \n        \n\uD83D\uDD13 **Ready to chat?** \n        \n* All you need to do is **SIGN UP** or **LOG IN** now. \n        \n\uD83E\uDD16 **So what are you waiting for?** \n        \n* We've got a lot to talk about!\n        "}),d){let e={...d,messages:[...d.messages,...n]};j({field:"selectedConversation",value:e});return}if(d){let s,n;if(r){let t=[...d.messages];for(let e=0;e<r;e++)t.pop();s={...d,messages:[...t,e]}}else s={...d,messages:[...d.messages,e]};j({field:"selectedConversation",value:s}),j({field:"loading",value:!0}),j({field:"messageIsStreaming",value:!0});let i={model:s.model.id,messages:s.messages};n=a?JSON.stringify({...i}):JSON.stringify(i);let o=new AbortController,c=L(a),x=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},signal:o.signal,body:n});if(!x.ok){j({field:"loading",value:!1}),j({field:"messageIsStreaming",value:!1}),P.ZP.error(x.statusText);return}let m=x.body;if(!m){j({field:"loading",value:!1}),j({field:"messageIsStreaming",value:!1});return}if(a){let{answer:e}=await x.json(),t=[...s.messages,{role:"assistant",content:e}];s={...s,messages:t},j({field:"selectedConversation",value:b}),w(s);let r=u.map(e=>e.id===d.id?s:e);0===r.length&&r.push(s),j({field:"conversations",value:r}),y(r),j({field:"loading",value:!1}),j({field:"messageIsStreaming",value:!1})}else{if(1===s.messages.length){let{content:t}=e,r=t.length>30?t.substring(0,30)+"...":t;s={...s,name:r}}j({field:"loading",value:!1});let t=m.getReader(),r=new TextDecoder,a=!1,n=!0,i="";for(;!a;){if(!0===l.current){o.abort(),a=!0;break}let{value:e,done:c}=await t.read();a=c;let d=r.decode(e);if(i+=d,n){n=!1;let e=[...s.messages,{role:"assistant",content:d}];j({field:"selectedConversation",value:s={...s,messages:e}})}else{let e=s.messages.map((e,t)=>t===s.messages.length-1?{...e,content:i}:e);j({field:"selectedConversation",value:s={...s,messages:e}})}}w(s);let c=u.map(e=>e.id===d.id?s:e);0===c.length&&c.push(s),j({field:"conversations",value:c}),y(c),j({field:"messageIsStreaming",value:!1})}}},[m,u,h,d,l]),[J,$]=(0,i.useState)(!1),Y=z(),X=(0,E.v0)(Y);(0,i.useEffect)(()=>{let e=async()=>{let e=!!X.currentUser&&await Z(Y);$(e)};e()},[Y,null===(t=X.currentUser)||void 0===t?void 0:t.uid]),(0,i.useCallback)(()=>{if(I){var e,t;null===(e=M.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}),null===(t=R.current)||void 0===t||t.focus()}},[I]);let q=(r=()=>{if(I){var e;null===(e=M.current)||void 0===e||e.scrollIntoView(!0)}},function(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];s?(clearTimeout(a),a=setTimeout(()=>{Date.now()-s>=250&&(r(...t),s=Date.now())},250-(Date.now()-s))):(r(...t),s=Date.now())});(0,i.useEffect)(()=>{q(),d&&T(d.messages[d.messages.length-2])},[d,q]),(0,i.useEffect)(()=>{let e=new IntersectionObserver(e=>{let[t]=e;if(A(t.isIntersecting),t.isIntersecting){var r;null===(r=R.current)||void 0===r||r.focus()}},{root:null,threshold:.5}),t=M.current;return t&&e.observe(t),()=>{t&&e.unobserve(t)}},[M]);let Q=null==d?void 0:d.model;return(0,n.jsx)("div",{className:"relative flex-1 overflow-hidden bg-white dark:bg-hgpt-medium-gray",children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"max-h-full overflow-x-hidden",ref:H,onScroll:()=>{if(H.current){let{scrollTop:e,scrollHeight:t,clientHeight:r}=H.current;e+r<t-30?(A(!1),W(!0)):(A(!0),W(!1))}},children:(null==d?void 0:d.messages.length)===0?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"mx-auto flex flex-col space-y-5 px-3 pt-5 sm:max-w-[600px] md:space-y-12 md:pt-6",children:[(0,n.jsx)("div",{className:"z-10",children:x.length>0&&(0,n.jsx)(en,{})}),(0,n.jsx)("div",{className:"absolute inset-x-0 top-28 ml-auto mr-auto mb-10 flex flex flex flex-grow items-center items-center justify-center justify-center gap-2 text-center text-4xl font-semibold text-gray-200 dark:text-gray-600 sm:mb-16",children:0===x.length?(0,n.jsx)("div",{children:(0,n.jsx)(U,{size:"18px",className:"mx-auto"})}):(0,n.jsxs)(n.Fragment,{children:["HackerGPT",J&&(0,n.jsx)("span",{className:"rounded-md bg-yellow-200 py-0.5 px-1.5 text-xs uppercase text-yellow-900 md:text-sm",children:"Plus"})]})})]})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"sticky top-0 z-10 flex flex-1 flex-grow items-center justify-center gap-2 border border-b-neutral-300 bg-neutral-100 py-5 text-sm text-neutral-500 dark:border-none dark:bg-hgpt-light-gray dark:text-neutral-200 sm:justify-center",children:Q&&(0,n.jsxs)(n.Fragment,{children:["HackerGPT"===Q.name?(0,n.jsx)(C.Z,{size:20}):"Web Browsing (GPT-4)"===Q.name?(0,n.jsx)(S.Z,{size:20}):(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"none",className:"icon-sm group-hover/button:text-brand-purple transition-colors",width:"16",height:"16",children:(0,n.jsx)("path",{d:"M12.784 1.442a.8.8 0 0 0-1.569 0l-.191.953a.8.8 0 0 1-.628.628l-.953.19a.8.8 0 0 0 0 1.57l.953.19a.8.8 0 0 1 .628.629l.19.953a.8.8 0 0 0 1.57 0l.19-.953a.8.8 0 0 1 .629-.628l.953-.19a.8.8 0 0 0 0-1.57l-.953-.19a.8.8 0 0 1-.628-.629l-.19-.953h-.002ZM5.559 4.546a.8.8 0 0 0-1.519 0l-.546 1.64a.8.8 0 0 1-.507.507l-1.64.546a.8.8 0 0 0 0 1.519l1.64.547a.8.8 0 0 1 .507.505l.546 1.641a.8.8 0 0 0 1.519 0l.546-1.64a.8.8 0 0 1 .506-.507l1.641-.546a.8.8 0 0 0 0-1.519l-1.64-.546a.8.8 0 0 1-.507-.506L5.56 4.546Zm5.6 6.4a.8.8 0 0 0-1.519 0l-.147.44a.8.8 0 0 1-.505.507l-.441.146a.8.8 0 0 0 0 1.519l.44.146a.8.8 0 0 1 .507.506l.146.441a.8.8 0 0 0 1.519 0l.147-.44a.8.8 0 0 1 .506-.507l.44-.146a.8.8 0 0 0 0-1.519l-.44-.147a.8.8 0 0 1-.507-.505l-.146-.441Z",fill:"currentColor"})}),Q.name]})}),D&&(0,n.jsx)("div",{className:"flex flex-col space-y-10 md:mx-auto md:max-w-xl md:gap-6 md:py-3 md:pt-6 lg:max-w-2xl lg:px-0 xl:max-w-3xl",children:(0,n.jsx)(en,{})}),null==d?void 0:d.messages.map((e,t)=>(0,n.jsx)(eC,{message:e,messageIndex:t,onEdit:e=>{T(e),K(e,(null==d?void 0:d.messages.length)-t)}},t)),v&&(0,n.jsx)(F,{}),(0,n.jsx)("div",{className:"h-[162px] bg-white dark:bg-hgpt-medium-gray",ref:M})]})}),(0,n.jsx)(B,{stopConversationRef:l,textareaRef:R,onSend:(e,t)=>{T(e),K(e,0,t)},onScrollDownClick:()=>{var e;null===(e=H.current)||void 0===e||e.scrollTo({top:H.current.scrollHeight,behavior:"smooth"})},onRegenerate:()=>{N&&K(N,2,null)},showScrollDownButton:O})]})})});eS.displayName="Chat";var eP=r(13499),eE=r(10614),eT=r(11417),ez=r(17010),eI=r(35336);let eA=e=>{let[t,r]=(0,i.useState)(!1),{dispatch:a}=(0,i.useContext)(G)||{};(0,i.useEffect)(()=>{let e=(0,E.v0)(),t=(0,E.Aj)(e,e=>{r(!!e)});return()=>t()},[]);let s=()=>{a({field:"conversations",value:[]}),a({field:"selectedConversation",value:null}),localStorage.removeItem("conversations"),localStorage.removeItem("selectedConversation"),window.location.reload()};return{isUserLoggedIn:t,handleLogOut:()=>{let t=(0,E.v0)();(0,E.w7)(t).then(()=>{r(!1),s(),e&&e()}).catch(e=>{console.error("Error during sign out:",e)})}}};var eZ=r(20373);let eG=e=>{var t;let{open:r,onClose:a}=e,{t:s}=(0,c.$G)("settings"),l=j(),{state:o,dispatch:d}=x({initialState:l}),{dispatch:u}=(0,i.useContext)(G),m=(0,i.useRef)(null),{isUserLoggedIn:h,handleLogOut:g}=eA(),p=(0,es.useRouter)(),[f,v]=(0,i.useState)(!1),[b,w]=(0,i.useState)(null),y=z(),k=(0,E.v0)(y),C=[{name:"General",icon:(0,n.jsx)(O.Z,{size:22,strokeWidth:2}),isProtected:!1},{name:"API keys",icon:(0,n.jsx)(eI.Z,{size:22,strokeWidth:2}),isProtected:!0}],[S,P]=(0,i.useState)(C[0].name),[T,I]=(0,i.useState)(!1),[A,L]=(0,i.useState)(""),[U,D]=(0,i.useState)(""),[_,W]=(0,i.useState)(!1),[M,H]=(0,i.useState)([]),[R,B]=(0,i.useState)(!1),[K,F]=(0,i.useState)(!1),[J,$]=(0,i.useState)(!1),[X,q]=(0,i.useState)(""),[Q,ee]=(0,i.useState)(!1),[et,er]=(0,i.useState)(""),[ea,el]=(0,i.useState)(!1),en=async()=>{if(!k.currentUser){q("User not authenticated"),ee(!1);return}B(!0),ee(!0),q("");try{var e;let t=await (null===(e=k.currentUser)||void 0===e?void 0:e.getIdToken()),r=await fetch("".concat("https://us-central1-hackergpt-6c79e.cloudfunctions.net/createApiKey"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({keyName:U})});if(!r.ok){let e=await r.text(),t=e||"Error code: ".concat(r.status);return q("Error creating API key: ".concat(t)),ee(!1),B(!1),!1}let a=await r.json(),s=new Date(a.created).toLocaleString();return L(a.key),I(!0),W(!0),H(e=>[...e,{...a,created:s}]),B(!1),!0}catch(e){e instanceof Error?q("Failed to create key: "+e.message):q("Failed to create key: An unknown error occurred")}finally{return ee(!1),B(!1),!1}},ei=async e=>{if(!k.currentUser){er("User not authenticated"),el(!1);return}if(!e){er("Key ID is required"),el(!1);return}F(!0),el(!0),er("");try{var t;let r=await (null===(t=k.currentUser)||void 0===t?void 0:t.getIdToken()),a=await fetch("".concat("https://us-central1-hackergpt-6c79e.cloudfunctions.net/deleteApiKey"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({keyId:e})});if(!a.ok){let e=await a.text(),t=e||"Error code: ".concat(a.status);return er("Error deleting API key: ".concat(t)),el(!1),F(!1),!1}return await a.json(),H(t=>t.filter(t=>t.id!==e)),el(!1),F(!1),!0}catch(e){return e instanceof Error?er("Failed to delete key: "+e.message):er("Failed to delete key: An unknown error occurred"),el(!1),F(!1),!1}},eo=async()=>{if(!k.currentUser){console.error("User not authenticated"),$(!1);return}$(!0);try{var e;let t=await (null===(e=k.currentUser)||void 0===e?void 0:e.getIdToken()),r=await fetch("".concat("https://us-central1-hackergpt-6c79e.cloudfunctions.net/fetchUserApiKeys"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});if(!r.ok){try{let e=await r.text(),t=e||"Error code: ".concat(r.status);console.error("Error fetching user API keys: ".concat(t)),$(!1)}catch(e){console.error("Error fetching user API keys:, status code: ".concat(r.status)),$(!1)}return}let a=await r.json();return $(!1),a}catch(e){return console.error("Error fetching user API keys:",e),$(!1),[]}};(0,i.useEffect)(()=>{let e=async()=>{if("API keys"===S&&f){let e=await eo();H(e)}};e()},[S,f]);let ed=async()=>{let e=!!k.currentUser&&await Z(y);if(v(e),e&&h)try{let e=await Y(y);w(e)}catch(e){console.error("Error pre-fetching portal URL:",e)}};(0,i.useEffect)(()=>{ed()},[y,null===(t=k.currentUser)||void 0===t?void 0:t.uid,h]),(0,i.useEffect)(()=>{let e=e=>{m.current&&!m.current.contains(e.target)&&window.addEventListener("mouseup",t)},t=e=>{window.removeEventListener("mouseup",t),a()};return window.addEventListener("mousedown",e),()=>{window.removeEventListener("mousedown",e)}},[a]),(0,i.useEffect)(()=>{u({field:"lightMode",value:o.theme}),N(o)},[o.theme]);let[eu,ex]=(0,i.useState)(!1),[em,eh]=(0,i.useState)(""),[eg,ep]=(0,i.useState)(""),ef=(e,t)=>{eh(e),ep(t),er(""),ex(!0)},ev=async()=>{if(em){let e=await ei(em);e&&ex(!1)}};return r?(0,n.jsx)("div",{className:"inset-negative-5 fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,n.jsx)("div",{className:"fixed inset-0 z-10 overflow-hidden",children:(0,n.jsxs)("div",{className:"flex min-h-screen items-center justify-center px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,n.jsx)("div",{className:"hidden sm:inline-block sm:h-screen sm:align-middle","aria-hidden":"true"}),(0,n.jsxs)("div",{ref:m,className:"inline-block max-h-[500px] max-h-[80%] w-11/12 transform overflow-y-auto rounded-lg border border-gray-300 bg-white pt-5 pb-4 text-left align-bottom shadow-xl transition-all dark:border-neutral-400 dark:bg-hgpt-dark-gray sm:my-8 sm:max-h-[600px] sm:w-full sm:max-w-3xl sm:p-2 sm:align-middle",role:"dialog",children:[(0,n.jsxs)("div",{className:"px-4 pt-5 text-black dark:text-neutral-200",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h3",{className:"text-xl font-bold",children:s("Settings")}),(0,n.jsx)("button",{onClick:a,children:(0,n.jsx)(V.Z,{color:"gray",size:22,strokeWidth:2})})]}),(0,n.jsx)("hr",{className:"my-4 border-hgpt-chat-gray dark:border-white"})]}),(0,n.jsxs)("div",{className:"flex flex-col sm:flex-col",children:[(0,n.jsx)("div",{children:(0,n.jsx)("nav",{className:"flex justify-start justify-center","aria-label":"Sidebar",children:C.map(e=>!e.isProtected||e.isProtected&&h?(0,n.jsxs)("button",{onClick:()=>P(e.name),className:"mb-2 mr-2 inline-flex items-center justify-center rounded-md py-2 px-4 text-sm font-medium sm:mb-2 sm:mr-0 sm:justify-start ".concat(S===e.name?"bg-hgpt-hover-white text-black dark:bg-hgpt-chat-gray dark:text-neutral-200":"text-black hover:bg-gray-100 dark:text-neutral-200 dark:hover:bg-gray-700"),children:[e.icon,(0,n.jsx)("span",{className:"ml-2",children:e.name})]},e.name):null)})}),(0,n.jsxs)("div",{className:"w-full p-6",children:["General"===S&&(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"mb-2 text-sm font-bold text-black dark:text-neutral-200",children:s("Theme")}),(0,n.jsxs)("select",{className:"w-full cursor-pointer bg-transparent p-2 text-neutral-700 dark:text-neutral-200",value:o.theme,onChange:e=>d({field:"theme",value:e.target.value}),children:[(0,n.jsx)("option",{value:"dark",children:s("Dark mode")}),(0,n.jsx)("option",{value:"light",children:s("Light mode")})]}),f&&h&&(0,n.jsx)("button",{type:"button",className:"mt-6 w-full rounded-lg border border border-gray-300 bg-white px-4 py-2 text-black shadow hover:bg-hgpt-hover-white dark:bg-hgpt-dark-gray dark:text-white dark:hover:bg-hgpt-medium-gray",onClick:()=>{b?p.push(b):(async()=>{try{let e=await Y(y);p.push(e)}catch(e){console.error("Error fetching portal URL:",e)}})()},children:(0,n.jsx)("span",{children:"Manage Subscription"})}),h?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("button",{type:"button",className:"mt-6 w-full rounded-lg border border-red-700 bg-red-600 px-4 py-2 text-white shadow hover:bg-red-500 focus:outline-none dark:border-neutral-800 dark:border-opacity-50 dark:bg-red-700 dark:text-white dark:hover:bg-red-500",onClick:g,children:"Log Out"})}):null]}),"API keys"===S&&(0,n.jsx)("div",{children:f&&h?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"text-left",children:[(0,n.jsx)("p",{className:"mb-4 text-black dark:text-white",children:"Your secret API keys are listed below. Please note that we do not display your secret API keys again after you generate them."}),(0,n.jsx)("p",{className:"mb-4 text-black dark:text-white",children:"Do not share your API key with others, or expose it in the browser or other client-side code."}),(0,n.jsxs)("p",{className:"mb-4 text-black dark:text-white",children:["Check our"," ",(0,n.jsx)("a",{href:"https://hackergpt.gitbook.io/chat/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-600",children:"API documentation"})," ","for guidance."]})]}),J?(0,n.jsx)("div",{className:"flex justify-center py-4",children:(0,n.jsx)(eZ.Z,{size:30,color:"white"})}):M.length>0?(0,n.jsx)("div",{className:"mb-4 overflow-x-auto",children:(0,n.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 text-center",children:[(0,n.jsx)("thead",{className:"bg-white dark:bg-hgpt-dark-gray",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{scope:"col",className:"px-6 py-4 text-xs font-bold uppercase tracking-wider text-black dark:text-white",children:"Name"}),(0,n.jsx)("th",{scope:"col",className:"px-6 py-4 text-xs font-bold uppercase tracking-wider text-black dark:text-white",children:"Key"}),(0,n.jsx)("th",{scope:"col",className:"px-6 py-4 text-xs font-bold uppercase tracking-wider text-black dark:text-white",children:"Created"}),(0,n.jsx)("th",{scope:"col",className:"px-6 py-4 text-xs font-bold uppercase tracking-wider text-black dark:text-white",children:"Last Used"}),(0,n.jsx)("th",{scope:"col",className:"px-2 py-3 text-xs font-bold uppercase tracking-wider text-black dark:text-white"})]})}),(0,n.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white text-center dark:bg-hgpt-dark-gray",children:M.map((e,t)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"whitespace-nowrap px-4 py-4 text-sm text-black dark:text-white",children:e.keyName.length>15?"".concat(e.keyName.substring(0,15),"..."):e.keyName}),(0,n.jsx)("td",{className:"whitespace-nowrap px-4 py-4 text-sm text-black dark:text-white",children:e.censoredKey}),(0,n.jsx)("td",{className:"whitespace-nowrap px-4 py-4 text-sm text-black dark:text-white",children:e.created?new Date(e.created).toLocaleDateString():"Never"}),(0,n.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-black dark:text-white",children:e.lastUsed?new Date(e.lastUsed).toLocaleDateString():"Never"}),(0,n.jsx)("td",{className:"whitespace-nowrap px-4 py-4 text-sm font-medium",children:(0,n.jsx)("button",{onClick:()=>ef(e.id,e.censoredKey),className:"text-black hover:text-hgpt-chat-gray dark:text-white dark:hover:text-hgpt-hover-white",children:(0,n.jsx)(ec.Z,{size:18,strokeWidth:2})})})]},t))})]})}):(0,n.jsx)("div",{className:"py-4 text-center",children:"No API keys found."}),(0,n.jsx)("button",{type:"button",className:"mt-4 w-full rounded-lg bg-blue-500 px-4 py-2 text-white shadow hover:bg-blue-600 focus:outline-none",onClick:()=>{q(""),I(!0)},children:"Create New Secret Key"})]}):(0,n.jsx)("div",{className:"text-black dark:text-white",children:"To use the HackerGPT API with your app and create API keys, you need to have a Plus Subscription."})}),T&&(0,n.jsx)("div",{className:"z-60 fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:(0,n.jsx)("div",{className:"m-4 mx-auto max-w-lg rounded bg-white p-6 shadow dark:bg-hgpt-dark-gray",children:(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("div",{className:"mb-4 flex w-full items-center justify-between",children:[(0,n.jsx)("h2",{className:"text-lg font-bold text-black dark:text-white",children:"Create an API Key"}),(0,n.jsx)("button",{onClick:()=>{I(!1),W(!1),D("")},children:(0,n.jsx)(V.Z,{color:"gray",size:22,strokeWidth:2})})]}),_?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{className:"mb-2 self-start text-sm text-black dark:text-white",children:"Your new key:"})," ",(0,n.jsx)("p",{className:"mb-4 w-full rounded bg-hgpt-light-gray p-2 text-white dark:bg-hgpt-medium-gray",children:A}),(0,n.jsx)("p",{className:"mb-4 self-start text-sm text-black dark:text-white",children:"Please copy it now and write it down somewhere safe. You will not be able to see it again."})," ",(0,n.jsx)("button",{className:"w-full rounded bg-blue-500 py-2 px-4 text-white",onClick:()=>{I(!1),W(!1)},children:"Done"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{className:"mb-2 text-sm text-black dark:text-white",children:"Name your key"}),(0,n.jsx)("input",{type:"text",placeholder:"My Test Key",value:U,onChange:e=>D(e.target.value),className:"mb-4 w-full rounded bg-hgpt-light-gray p-2 text-white dark:bg-hgpt-medium-gray"}),X&&(0,n.jsx)("div",{className:"mb-4 rounded bg-red-100 p-2 text-sm text-red-700",children:X}),(0,n.jsx)("button",{className:"mt-4 w-full rounded bg-blue-500 py-2 px-4 text-white",onClick:en,disabled:!U||Q||R,children:R?(0,n.jsx)(eZ.Z,{size:20,color:"white"}):"Create"})]})]})})}),eu&&(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,n.jsx)("div",{className:"m-4 mx-auto max-w-sm rounded-lg bg-white p-6 dark:bg-hgpt-dark-gray",children:(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("h3",{className:"mb-4 text-lg font-bold text-black dark:text-white",children:"Revoke secret key"}),(0,n.jsx)("p",{className:"mb-4 text-sm text-black dark:text-white",children:"This API key will immediately be disabled. API requests made using this key will be rejected, which could cause any systems still depending on it to break. Once revoked, you'll no longer be able to view or modify this API key."}),(0,n.jsx)("div",{className:"mb-4 w-full rounded bg-hgpt-light-gray p-2 text-white dark:bg-hgpt-medium-gray",children:eg}),et&&(0,n.jsx)("div",{className:"mb-4 rounded bg-red-100 p-2 text-sm text-red-700",children:et}),(0,n.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,n.jsx)("button",{className:"rounded bg-gray-300 py-2 px-4 text-black hover:bg-gray-400 dark:bg-gray-600 dark:text-white dark:hover:bg-gray-700",onClick:()=>ex(!1),children:"Cancel"}),(0,n.jsx)("button",{className:"rounded bg-red-600 py-2 px-4 text-white hover:bg-red-700",onClick:ev,disabled:ea||K,children:K?(0,n.jsx)(eZ.Z,{size:20,color:"white"}):"Revoke key"})]})]})})})]})]})]})]})})}):null},eL=e=>{let{text:t="",className:r="",icon:a,suffixIcon:s,onClick:l}=e;return(0,n.jsxs)("button",{className:"flex w-full cursor-pointer select-none items-center justify-between rounded-md py-3 px-3 text-[14px] leading-3 text-white transition-colors duration-200 hover:bg-gray-500/10 ".concat(r),onClick:l,children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[(0,n.jsx)("div",{children:a}),t&&(0,n.jsx)("span",{children:t})]}),s&&(0,n.jsx)("span",{children:s})]})},eU=(0,i.createContext)(void 0),eD=e=>{let{onClearConversations:t}=e,[r,a]=(0,i.useState)(!1),{t:s}=(0,c.$G)("sidebar"),l=()=>{t(),a(!1)};return r?(0,n.jsxs)("div",{className:"flex w-full cursor-pointer items-center rounded-lg py-3 px-3 hover:bg-gray-500/10",children:[(0,n.jsx)(ec.Z,{size:18}),(0,n.jsx)("div",{className:"ml-3 flex-1 text-left text-[12.5px] leading-3 text-white",children:s("Are you sure?")}),(0,n.jsxs)("div",{className:"flex w-[40px]",children:[(0,n.jsx)(ed.Z,{className:"ml-auto mr-1 min-w-[20px] text-neutral-400 hover:text-neutral-100",size:18,onClick:e=>{e.stopPropagation(),l()}}),(0,n.jsx)(V.Z,{className:"ml-auto min-w-[20px] text-neutral-400 hover:text-neutral-100",size:18,onClick:e=>{e.stopPropagation(),a(!1)}})]})]}):(0,n.jsx)(eL,{text:s("Clear all chats"),icon:(0,n.jsx)(ec.Z,{size:18}),onClick:()=>a(!0)})};var e_=r(3600),eO=r(62042),eW=e=>{let{isOpen:t,onClose:r}=e,[a,s]=(0,i.useState)(null),[l,o]=(0,i.useState)(null),[c,d]=(0,i.useState)(null),[u,x]=(0,i.useState)(!1),[m,h]=(0,i.useState)(!1),[g,p]=(0,i.useState)("");(0,i.useEffect)(()=>{let e=I.auth().onAuthStateChanged(e=>{s(e||null)});return()=>{e()}},[]);let f=()=>{r()},v=async()=>{let e=new I.auth.GoogleAuthProvider;try{await I.auth().signInWithPopup(e),o(null),f()}catch(e){o("An error occurred. Please try again.")}},b=async e=>{let t={url:window.location.origin,handleCodeInApp:!0};try{await I.auth().sendSignInLinkToEmail(e,t),d(null),x(!0),window.localStorage.setItem("emailForSignIn",e)}catch(e){switch(e.code){case"auth/invalid-email":d("Invalid email address. Please enter a valid email.");break;case"auth/network-request-failed":d("Network error. Please check your internet connection and try again.");break;default:d("An error occurred. Please try again later.")}}};return(0,n.jsxs)("div",{className:"inset-negative-5 fixed inset-0 z-50 flex items-center justify-center overflow-y-auto ".concat(t?"block":"hidden"),children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-black opacity-30"}),(0,n.jsxs)("div",{className:"relative z-50 m-auto w-full max-w-md overflow-hidden rounded-lg border border-gray-300 bg-white text-white dark:bg-hgpt-dark-gray",children:[(0,n.jsx)("div",{className:"absolute top-2 right-2 flex h-10 w-10 cursor-pointer items-center justify-center",onClick:r,children:(0,n.jsx)(V.Z,{color:"gray",size:22,strokeWidth:2})}),(0,n.jsxs)("div",{className:"p-6 pt-12 pb-2",children:[(0,n.jsxs)("div",{className:"flex w-full flex-col items-center justify-center space-y-4 p-8 pt-2 pb-2",children:[(0,n.jsx)("h1",{className:"pt-2 pb-4 text-3xl font-bold text-black dark:text-white",children:m?"Create Your Account":"Welcome Back"}),(0,n.jsx)("input",{type:"email",value:g,onChange:e=>p(e.target.value),placeholder:"Email address",className:"flex w-full items-center justify-center rounded border border-gray-300 bg-white px-4 py-2 text-lg text-black hover:bg-hgpt-hover-white dark:bg-hgpt-dark-gray dark:text-white dark:hover:bg-hgpt-medium-gray"}),c&&(0,n.jsxs)("div",{className:"flex items-center justify-center text-center text-xs text-red-500 ",children:[(0,n.jsx)(e_.Z,{size:18,className:"mr-2"}),c]}),u&&(0,n.jsxs)("div",{className:"flex items-center justify-center text-center text-xs text-green-500 ",children:[(0,n.jsx)(eO.Z,{size:18,className:"mr-2"}),"Email link sent successfully!"]}),(0,n.jsx)("button",{onClick:()=>b(g),className:"flex w-full items-center justify-center rounded border border-gray-300 bg-white px-4 py-2 text-lg text-black hover:bg-hgpt-hover-white dark:bg-hgpt-dark-gray dark:text-white dark:hover:bg-hgpt-medium-gray",children:m?"Sign up with Email Link":"Log in with Email Link"}),(0,n.jsx)("span",{className:"mx-4 text-black dark:text-white",children:"OR"}),(0,n.jsxs)("button",{onClick:v,className:"flex w-full items-center justify-center rounded border border-gray-300 bg-white px-4 py-2 text-lg text-black hover:bg-hgpt-hover-white dark:bg-hgpt-dark-gray dark:text-white dark:hover:bg-hgpt-medium-gray",children:[(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-brand-google mr-2",width:"24",height:"24",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,n.jsx)("path",{d:"M17.788 5.108a9 9 0 1 0 3.212 6.892h-8"})]}),m?"Sign up with Google":"Log in with Google"]}),(0,n.jsxs)("button",{onClick:function(){let e=new I.auth.TwitterAuthProvider;I.auth().signInWithPopup(e).then(e=>{e.credential&&(e.credential,f())}).catch(e=>{console.error(e)})},className:"flex w-full items-center justify-center rounded border border-gray-300 bg-white px-4 py-2 text-lg text-black hover:bg-hgpt-hover-white dark:bg-hgpt-dark-gray dark:text-white dark:hover:bg-hgpt-medium-gray",children:[(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-brand-x mr-2",width:"24",height:"24",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,n.jsx)("path",{d:"M4 4l11.733 16h4.267l-11.733 -16z"}),(0,n.jsx)("path",{d:"M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772"})]}),m?"Sign up with Twitter / X":"Log in with Twitter / X"]})]}),l&&(0,n.jsxs)("div",{className:"flex items-center justify-center py-2 pb-2 text-center text-xs text-red-500",children:[(0,n.jsx)(e_.Z,{size:18,className:"mr-2"}),l]})]}),(0,n.jsxs)("div",{className:"pt-2 pb-2 text-center text-xs text-black dark:text-white",children:["By using HackerGPT, you agree to our"," ",(0,n.jsx)("a",{href:"/terms-and-conditions",target:"_blank",className:"font-semibold underline",children:"Terms of Use"}),"."]}),(0,n.jsx)("div",{className:"flex justify-center p-6 pt-6 pb-5",children:m?(0,n.jsxs)("button",{onClick:()=>{h(!1),o("")},className:"text-black dark:text-white",children:["Already have an account?"," ",(0,n.jsx)("span",{className:"font-semibold",children:"Log in"})]}):(0,n.jsxs)("button",{onClick:()=>{h(!0),o("")},className:"text-black dark:text-white",children:["Don't have an account?"," ",(0,n.jsx)("span",{className:"font-semibold",children:"Sign up"})]})})]})]})};let eM=()=>{var e,t;let{t:r}=(0,c.$G)("sidebar"),[a,s]=(0,i.useState)(!1),[l,o]=(0,i.useState)(null),[d,u]=(0,i.useState)(!1),[x,m]=(0,i.useState)(null),[h,g]=(0,i.useState)(!0),[p,f]=(0,i.useState)(!1),v=z(),b=(0,E.v0)(v);(0,i.useEffect)(()=>{let e=async()=>{let e=!!b.currentUser&&await Z(v);u(e)};e()},[v,null===(e=b.currentUser)||void 0===e?void 0:e.uid]);let{state:{conversations:w},dispatch:y}=(0,i.useContext)(G),{handleClearConversations:k}=(0,i.useContext)(eU);(0,i.useEffect)(()=>{let e=(0,E.v0)(),t=(0,E.Aj)(e,e=>{o(e)});return()=>{t()}},[]);let[j,N]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=async()=>{if(b.currentUser)try{let e=await $(v);m(e),g(!1)}catch(e){console.error("Error fetching Stripe checkout URL:",e)}};e()},[null===(t=b.currentUser)||void 0===t?void 0:t.uid]);let C=(null==l?void 0:l.displayName)||((null==l?void 0:l.email)?l.email.split("@")[0]:null);return(0,n.jsxs)("div",{className:"",children:[w.length>0?(0,n.jsx)(eD,{onClearConversations:k}):null,(0,n.jsxs)("div",{className:"flex flex-col items-center space-y-1 border-t border-white/20 pt-1 text-sm",children:[C?(0,n.jsxs)(n.Fragment,{children:[!d&&!h&&(0,n.jsx)(eL,{text:r("Upgrade to Plus"),icon:(0,n.jsx)(et.Z,{size:18}),onClick:()=>{f(!0)}}),(0,n.jsx)(ea,{isOpen:p,onClose:()=>{f(!1)},checkoutUrl:x}),(0,n.jsx)(eL,{icon:(0,n.jsx)(eP.Z,{size:18}),text:C,suffixIcon:(0,n.jsx)(eE.Z,{size:18,strokeWidth:1.5}),onClick:()=>s(!0)})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eL,{text:r("Settings"),icon:(0,n.jsx)(O.Z,{size:18}),onClick:()=>s(!0)}),(0,n.jsx)(eL,{text:r("Log in"),icon:(0,n.jsx)(eT.Z,{size:18}),onClick:()=>{N(!0)}})]}),(0,n.jsxs)("div",{className:"flex w-full",children:[(0,n.jsx)(eL,{className:"flex-grow",text:r("About us"),icon:(0,n.jsx)(ez.Z,{size:18}),onClick:()=>{window.open("/about-us","_blank")}}),(0,n.jsx)(eL,{className:"w-min",icon:(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-brand-x",width:"18",height:"18",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,n.jsx)("path",{d:"M4 4l11.733 16h4.267l-11.733 -16z"}),(0,n.jsx)("path",{d:"M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772"})]}),onClick:()=>{window.open("https://twitter.com/thehackergpt","_blank")}})]}),(0,n.jsx)(eG,{open:a,onClose:()=>{s(!1)}}),j&&(0,n.jsx)(eW,{isOpen:j,onClose:()=>{N(!1)}})]})]})};var eH=r(47447),eR=r(30471),eB=e=>{let{handleClick:t,children:r}=e;return(0,n.jsx)("button",{className:"min-w-[20px] p-1 text-neutral-400 hover:text-neutral-100",onClick:t,children:r})};let eK=e=>{let{conversation:t}=e,{state:{selectedConversation:r,messageIsStreaming:a},handleSelectConversation:s,handleUpdateConversation:l}=(0,i.useContext)(G),{handleDeleteConversation:o}=(0,i.useContext)(eU),[c,d]=(0,i.useState)(!1),[u,x]=(0,i.useState)(!1),[m,h]=(0,i.useState)(""),g=(e,t)=>{e.dataTransfer&&e.dataTransfer.setData("conversation",JSON.stringify(t))},p=e=>{m.trim().length>0&&(l(e,{key:"name",value:m}),h(""),x(!1))},[f,v]=(0,i.useState)(null);return(0,i.useEffect)(()=>{let e=(0,E.v0)(),t=(0,E.Aj)(e,e=>{v((null==e?void 0:e.uid)||null)});return t},[]),(0,i.useEffect)(()=>{u?d(!1):c&&x(!1)},[u,c]),(0,n.jsxs)("div",{className:"relative flex items-center",children:[u&&(null==r?void 0:r.id)===t.id?(0,n.jsxs)("div",{className:"flex w-full items-center gap-3 rounded-lg bg-hgpt-medium-gray/90 p-3",children:[(0,n.jsx)(eH.Z,{size:18}),(0,n.jsx)("input",{className:"mr-12 flex-1 overflow-hidden overflow-ellipsis border-neutral-400 bg-transparent text-left text-[12.5px] leading-3 text-white outline-none focus:border-neutral-100",type:"text",value:m,onChange:e=>h(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),r&&p(r))},autoFocus:!0})]}):(0,n.jsxs)("button",{className:"flex w-full cursor-pointer items-center gap-3 rounded-lg p-3 text-sm transition-colors duration-200 hover:bg-hgpt-medium-gray/90 ".concat(a?"disabled:cursor-not-allowed":""," ").concat((null==r?void 0:r.id)===t.id?"bg-hgpt-medium-gray/90":""),onClick:()=>s(t),disabled:a,draggable:"true",onDragStart:e=>g(e,t),children:[(0,n.jsx)(eH.Z,{size:18}),(0,n.jsx)("div",{className:"relative max-h-5 flex-1 overflow-hidden text-ellipsis whitespace-nowrap break-all text-left text-[12.5px] leading-3 ".concat((null==r?void 0:r.id)===t.id?"pr-12":"pr-1"),children:t.name})]}),(c||u)&&(null==r?void 0:r.id)===t.id&&(0,n.jsxs)("div",{className:"absolute right-1 z-10 flex text-gray-300",children:[(0,n.jsx)(eB,{handleClick:e=>{e.stopPropagation(),c?o(t):u&&p(t),d(!1),x(!1)},children:(0,n.jsx)(ed.Z,{size:18})}),(0,n.jsx)(eB,{handleClick:e=>{e.stopPropagation(),d(!1),x(!1)},children:(0,n.jsx)(V.Z,{size:18})})]}),(null==r?void 0:r.id)===t.id&&!c&&!u&&(0,n.jsxs)("div",{className:"absolute right-1 z-10 flex text-gray-300",children:[(0,n.jsx)(eB,{handleClick:e=>{e.stopPropagation(),x(!0),r&&h(r.name)},children:(0,n.jsx)(eR.Z,{size:18})}),(0,n.jsx)(eB,{handleClick:e=>{e.stopPropagation(),d(!0)},children:(0,n.jsx)(ec.Z,{size:18})})]})]})},eF=e=>{let{conversations:t}=e;return(0,n.jsx)("div",{className:"flex w-full flex-col gap-1",children:t.slice().reverse().map((e,t)=>(0,n.jsx)(eK,{conversation:e},t))})};var eJ=r(1177),e$=r(92005),eY=r(67421),eX=r(98963),eq=r(89014);let eQ=e=>{let{onClick:t,side:r}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{className:"fixed top-5 ".concat("right"===r?"right-[270px]":"left-[270px]"," z-50 h-7 w-7 hover:text-gray-400 dark:text-white dark:hover:text-gray-300 sm:top-0.5 sm:").concat("right"===r?"right-[270px]":"left-[270px]"," sm:h-8 sm:w-8 sm:text-neutral-700"),onClick:t,children:"right"===r?(0,n.jsx)(eX.Z,{}):(0,n.jsx)(eq.Z,{})}),(0,n.jsx)("div",{onClick:t,className:"absolute top-0 left-0 z-20 h-full w-full bg-black opacity-70 sm:hidden"})]})},eV=e=>{let{onClick:t,side:r}=e;return(0,n.jsx)("button",{className:"fixed top-2.5 ".concat("right"===r?"right-2":"left-2"," z-50 h-7 w-7 text-white hover:text-gray-400 dark:text-white dark:hover:text-gray-300 sm:top-0.5 sm:").concat("right"===r?"right-2":"left-2"," sm:h-8 sm:w-8 sm:text-neutral-700"),onClick:t,children:"right"===r?(0,n.jsx)(eq.Z,{}):(0,n.jsx)(eX.Z,{})})};var e0=e=>{let{isOpen:t,addItemButtonTitle:r,side:a,items:s,itemComponent:l,folderComponent:i,footerComponent:o,toggleOpen:c,handleCreateItem:d,handleDrop:u}=e,{t:x}=(0,eY.$G)("promptbar");return t?(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"fixed top-0 ".concat(a,"-0 z-40 flex h-full w-[260px] flex-none flex-col space-y-2 bg-hgpt-dark-gray p-2 text-[14px] transition-all sm:relative sm:top-0"),children:[(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsxs)("button",{className:"text-sidebar flex w-[240px] flex-shrink-0 cursor-pointer select-none items-center gap-3 rounded-md border border-white/20 p-3 text-white transition-colors duration-200 hover:bg-gray-500/10",onClick:()=>{d()},children:[(0,n.jsx)(eJ.Z,{size:16}),r]})}),(0,n.jsxs)("div",{className:"flex-grow overflow-auto",children:[(null==s?void 0:s.length)>0&&(0,n.jsx)("div",{className:"flex border-b border-white/20 pb-2",children:i}),(null==s?void 0:s.length)>0?(0,n.jsx)("div",{className:"pt-2",onDrop:u,onDragOver:e=>{e.preventDefault()},onDragEnter:e=>{e.target.style.background="#343541"},onDragLeave:e=>{e.target.style.background="none"},children:l}):(0,n.jsxs)("div",{className:"mt-8 select-none text-center text-white opacity-50",children:[(0,n.jsx)(e$.Z,{className:"mx-auto mb-3"}),(0,n.jsx)("span",{className:"text-[14px] leading-normal",children:x("No data.")})]})]}),o]}),(0,n.jsx)(eQ,{onClick:c,side:a})]}):(0,n.jsx)(eV,{onClick:c,side:a})};let e1={searchTerm:"",filteredConversations:[]};var e2=r(57632);let e4=()=>{let{t:e}=(0,c.$G)("sidebar"),t=x({initialState:e1}),{state:{conversations:r,showChatbar:a,defaultModelId:s,pluginKeys:l},dispatch:o,handleNewConversation:d,handleUpdateConversation:u}=(0,i.useContext)(G),{state:{searchTerm:m,filteredConversations:h},dispatch:g}=t;return(0,i.useEffect)(()=>{m?g({field:"filteredConversations",value:r.filter(e=>{let t=e.name.toLocaleLowerCase()+" "+e.messages.map(e=>e.content).join(" ");return t.toLowerCase().includes(m.toLowerCase())})}):g({field:"filteredConversations",value:r})},[m,r]),(0,n.jsx)(eU.Provider,{value:{...t,handleDeleteConversation:t=>{let a=r.filter(e=>e.id!==t.id);o({field:"conversations",value:a}),y(a),a.length>0?(o({field:"selectedConversation",value:a[a.length-1]}),w(a[a.length-1])):(s&&o({field:"selectedConversation",value:{id:(0,e2.Z)(),name:e("New Chat"),messages:[],model:p[s]}}),localStorage.removeItem("selectedConversation"))},handleClearConversations:()=>{s&&o({field:"selectedConversation",value:{id:(0,e2.Z)(),name:e("New Chat"),messages:[],model:p[s]}}),o({field:"conversations",value:[]}),localStorage.removeItem("conversationHistory"),localStorage.removeItem("selectedConversation")}},children:(0,n.jsx)(e0,{side:"left",isOpen:a,addItemButtonTitle:e("New chat"),itemComponent:(0,n.jsx)(eF,{conversations:h}),items:h,toggleOpen:()=>{o({field:"showChatbar",value:!a}),localStorage.setItem("showChatbar",JSON.stringify(!a))},handleCreateItem:d,handleDrop:e=>{if(e.dataTransfer){let t=JSON.parse(e.dataTransfer.getData("conversation"));u(t,{key:"folderId",value:0}),g({field:"searchTerm",value:""}),e.target.style.background="none"}},footerComponent:(0,n.jsx)(eM,{}),folderComponent:void 0})})},e5=e=>{let{selectedConversation:t,onNewConversation:r}=e;return(0,n.jsxs)("nav",{className:"flex w-full items-center justify-between bg-hgpt-dark-gray py-3 px-4",children:[(0,n.jsx)("div",{className:"mr-4"}),(0,n.jsx)("div",{className:"flex-1 truncate text-center text-base font-normal",children:t.name}),(0,n.jsx)("div",{children:(0,n.jsx)(eJ.Z,{className:"cursor-pointer hover:text-neutral-400",onClick:r})})]})},e8={apiKey:"",loading:!1,pluginKeys:[],lightMode:"dark",messageIsStreaming:!1,modelError:null,models:[],conversations:[],selectedConversation:void 0,currentMessage:void 0,prompts:[],temperature:.5,showPromptbar:!0,showChatbar:!0,messageError:!1,searchTerm:"",defaultModelId:void 0,serverSideApiKeyIsSet:!1,serverSidePluginKeysSet:!1};var e3=e=>{let{serverSideApiKeyIsSet:t,serverSidePluginKeysSet:r,defaultModelId:a}=e,{t:s}=(0,c.$G)("chat"),{getModels:l}=g(),{getModelsError:d}=m(),[h,k]=(0,i.useState)(!0),N=x({initialState:e8}),{state:{apiKey:C,lightMode:S,conversations:P,selectedConversation:T},dispatch:z}=N,I=(0,i.useRef)(!1),{data:A,error:Z,refetch:L}=(0,o.useQuery)(["GetModels",C,t],e=>{let{signal:r}=e;return C||t?l():null},{enabled:!0,refetchOnMount:!1});(0,i.useEffect)(()=>{A&&z({field:"models",value:A})},[A,z]),(0,i.useEffect)(()=>{z({field:"modelError",value:d(Z)})},[z,Z,d]);let[U,D]=(0,i.useState)(!1),[_,O]=(0,i.useState)(null);(0,i.useEffect)(()=>{let e=(0,E.v0)(),t=(0,E.Aj)(e,t=>{if(t)O(t.uid),D(!1);else if(O(null),(0,E.JB)(e,window.location.href)){let t=window.localStorage.getItem("emailForSignIn");t&&(0,E.P6)(e,t,window.location.href).then(()=>{window.localStorage.removeItem("emailForSignIn")}).catch(e=>{console.log("An error occurred. Please try again.")})}});return()=>t()},[]);let W=()=>{let e=P[P.length-1],t={id:(0,e2.Z)(),name:s("New Chat"),messages:[],model:(null==e?void 0:e.model)||{id:p[a].id,name:p[a].name,maxLength:p[a].maxLength,tokenLimit:p[a].tokenLimit}},r=[...P,t];z({field:"selectedConversation",value:t}),z({field:"conversations",value:r}),w(t),y(r),z({field:"loading",value:!1})};return(0,i.useEffect)(()=>{window.innerWidth<640&&z({field:"showChatbar",value:!1})},[T]),(0,i.useEffect)(()=>{a&&z({field:"defaultModelId",value:a}),t&&z({field:"serverSideApiKeyIsSet",value:t}),r&&z({field:"serverSidePluginKeysSet",value:r})},[a,t,r]),(0,i.useEffect)(()=>{let e=j();e.theme&&z({field:"lightMode",value:e.theme});let l=localStorage.getItem("apiKey");t?(z({field:"apiKey",value:""}),localStorage.removeItem("apiKey")):l&&z({field:"apiKey",value:l});let n=localStorage.getItem("pluginKeys");r?(z({field:"pluginKeys",value:[]}),localStorage.removeItem("pluginKeys")):n&&z({field:"pluginKeys",value:n}),window.innerWidth<640&&(z({field:"showChatbar",value:!1}),z({field:"showPromptbar",value:!1}));let i=localStorage.getItem("showChatbar");i&&z({field:"showChatbar",value:"true"===i});let o=localStorage.getItem("conversationHistory");if(o){let e=JSON.parse(o),t=v(e);z({field:"conversations",value:t})}let c=localStorage.getItem("selectedConversation");if(c){let e=JSON.parse(c),t=f(e);z({field:"selectedConversation",value:t})}else P[P.length-1],z({field:"selectedConversation",value:{id:(0,e2.Z)(),name:s("New Chat"),messages:[],model:p[a]}})},[a,z,t,r]),(0,n.jsxs)(G.Provider,{value:{...N,handleNewConversation:W,handleSelectConversation:e=>{z({field:"selectedConversation",value:e}),w(e)},handleUpdateConversation:(e,t)=>{let r={...e,[t.key]:t.value},{single:a,all:s}=b(r,P);z({field:"selectedConversation",value:a}),z({field:"conversations",value:s})}},children:[(0,n.jsxs)(u(),{children:[(0,n.jsx)("title",{children:"HackerGPT"}),(0,n.jsx)("meta",{name:"description",content:"Unlock the power of HackerGPT, your AI ethical hacking assistant, trained extensively on hacking knowledge. Swiftly identify, exploit, and mitigate vulnerabilities using cutting-edge AI expertise in cybersecurity."}),(0,n.jsx)("meta",{name:"viewport",content:"height=device-height ,width=device-width, initial-scale=1, user-scalable=no"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsx)("div",{className:"dark",children:U&&(0,n.jsx)(eW,{isOpen:U,onClose:()=>{D(!1)}})}),T&&(0,n.jsxs)("main",{className:"flex h-screen w-screen flex-col text-sm text-white dark:text-white ".concat(S),children:[(0,n.jsx)("div",{className:"fixed top-0 w-full sm:hidden",children:(0,n.jsx)(e5,{selectedConversation:T,onNewConversation:W})}),(0,n.jsxs)("div",{className:"flex h-full w-full pt-[44px] sm:pt-0",children:[(0,n.jsx)(e4,{}),(0,n.jsx)("div",{className:"flex flex-1",children:(0,n.jsx)(eS,{stopConversationRef:I})})]})]})]})},e6=!0}},function(e){e.O(0,[879,16,737,983,774,888,179],function(){return e(e.s=48312)}),_N_E=e.O()}]);